<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="nyt-57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="nyt-72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="nyt-114.png">
    <link rel="apple-touch-icon" sizes="144x144" href="nyt-144.png">
    <title>N.Y. Times</title>
    <script>
      const KEY = "key";
      const VALUE = "value";
      var content;
      function go() {
        window.location = "nytimes:///";
      }
      function maybeHide() {
        if (get()) {
          content.style.display = 'none';
          go();
        }
      }
      function init() {
        content = document.getElementById("content");
        maybeHide();
        window.addEventListener("focus", function() {
          if (get()) {
            go();
          }
        }, false);
      }
      function get() {
        return window.localStorage.getItem(KEY) === VALUE;
      }
      function set() {
        window.localStorage.setItem(KEY, VALUE);
      }
    </script>
  </head>
  <body onload="init()">
    <div id="content">
      <h1>N.Y. Times</h1>
      <ol>
        <li>Add this launcher as a Web Clip.</li>
        <li>Click <a href="javascript:set()">this link</a> to skip this page next time.</li>
        <li>Click <a href="javascript:maybeHide()">this link</a> to go.</li>
      </ol>
    </div>
  </body>
</html>
